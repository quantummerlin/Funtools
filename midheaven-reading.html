<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#bf5af2">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Quantum Merlin">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Quantum Merlin">
    <meta name="msapplication-TileColor" content="#bf5af2">
    <meta name="msapplication-navbutton-color" content="#bf5af2">
    <meta name="format-detection" content="telephone=no">
    <link rel="apple-touch-icon" href="RetroMerlin.jpg">
    <link rel="manifest" href="manifest.json">
    <title>Midheaven Sign Reading | Your Life Purpose & Career Path</title>
    <meta name="description" content="Discover your Midheaven sign and understand your true calling, career path, and public legacy">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700;900&family=Cinzel:wght@400;500;600;700;800;900&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap&v=20260112083146" rel="stylesheet">
    <link rel="stylesheet" href="quantum-merlin-styles.css">
    <script src="auto-fill.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/astronomy-engine@2.1.19/astronomy.browser.min.js?v=20260112083146"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Cormorant Garamond', serif;
            background: #0a0a0f;
            background-image: 
                radial-gradient(circle at 20% 50%, rgba(139, 92, 246, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(6, 182, 212, 0.15) 0%, transparent 50%);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.8;
            color: #e0e0e0;
        }
        .container { max-width: 900px; margin: 0 auto; }
        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            padding: 30px;
        }
        .header h1 {
            font-family: 'Cinzel Decorative', serif;
            font-size: 2.8em;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #fbbf24 0%, #06b6d4 50%, #ec4899 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 2px;
            font-weight: 700;
        }
        .header p {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.2em;
            color: #06b6d4;
            opacity: 0.9;
            font-style: italic;
        }
        .tool-card {
            background: rgba(20, 20, 30, 0.8);
            border: 2px solid rgba(6, 182, 212, 0.3);
            border-radius: 20px;
            padding: 50px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            margin-bottom: 30px;
        }
        .input-section {
            margin-bottom: 40px;
            padding-bottom: 30px;
            border-bottom: 2px solid rgba(6, 182, 212, 0.2);
        }
        .input-section:last-of-type {
            border-bottom: none;
        }
        .section-title {
            font-family: 'Cinzel', serif;
            font-size: 1.4em;
            color: #fbbf24;
            margin-bottom: 20px;
            font-weight: 600;
            letter-spacing: 0.5px;
        }
        .input-group {
            margin-bottom: 25px;
        }
        label {
            display: block;
            font-family: 'Cinzel', serif;
            font-weight: 600;
            margin-bottom: 10px;
            color: #06b6d4;
            font-size: 1.05em;
        }
        .helper-text {
            font-size: 0.9em;
            color: #9ca3af;
            margin-top: 5px;
            font-style: italic;
        }
        input[type="text"],
        input[type="date"],
        input[type="time"] {
            width: 100%;
            padding: 15px;
            background: rgba(10, 10, 20, 0.6);
            border: 2px solid rgba(6, 182, 212, 0.3);
            border-radius: 10px;
            color: #e0e0e0;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.1em;
            transition: all 0.3s ease;
        }
        input:focus {
            outline: none;
            border-color: #06b6d4;
            box-shadow: 0 0 20px rgba(6, 182, 212, 0.2);
        }
        button[type="submit"] {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #8b5cf6 0%, #06b6d4 100%);
            border: none;
            border-radius: 12px;
            color: white;
            font-family: 'Cinzel', serif;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 1px;
        }
        button[type="submit"]:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(139, 92, 246, 0.4);
        }
        .back-btn {
            display: inline-block;
            padding: 12px 30px;
            background: rgba(6, 182, 212, 0.1);
            border: 2px solid rgba(6, 182, 212, 0.3);
            border-radius: 10px;
            color: #06b6d4;
            text-decoration: none;
            font-family: 'Cinzel', serif;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .back-btn:hover {
            background: rgba(6, 182, 212, 0.2);
            border-color: #06b6d4;
        }
        .info-box {
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid rgba(251, 191, 36, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
        }
        .info-box h3 {
            font-family: 'Cinzel', serif;
            color: #fbbf24;
            margin-bottom: 10px;
        }
        .info-box p {
            color: #d1d5db;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Midheaven Sign Reading</h1>
            <p>Discover your life purpose, career path, and public legacy</p>
        </div>

        <div class="tool-card">
            <div class="info-box">
                <h3>What is the Midheaven (MC)?</h3>
                <p>Your Midheaven, or MC (Medium Coeli), is the highest point in your birth chart—literally the point in the sky directly overhead at your birth. It represents your life's calling, career path, public reputation, and the legacy you're meant to build. While your Rising Sign shows how you appear to others personally, your MC shows how you're meant to appear to the world professionally and what you're here to achieve.</p>
            </div>

            <form id="midheavenForm">
                <div class="input-section">
                    <div class="section-title">Personal Information</div>
                    <div class="input-group">
                        <label for="preferredName">Your Name</label>
                        <input type="text" id="preferredName" placeholder="The name you resonate with" required>
                    </div>
                </div>

                <div class="input-section">
                    <div class="section-title">Birth Information</div>
                    <div class="input-group">
                        <label for="birthDate">Date of Birth</label>
                        <input type="date" id="birthDate" required>
                    </div>
                    <div class="input-group">
                        <label for="birthTime">Time of Birth</label>
                        <input type="time" id="birthTime" required>
                        <div class="helper-text">Exact time is essential - MC changes every 4 minutes!</div>
                    </div>
                    <div class="input-group">
                        <label for="birthPlace">Place of Birth</label>
                        <input type="text" id="birthPlace" placeholder="City, Country" required>
                        <div class="helper-text">Needed to calculate the MC position</div>
                    </div>
                </div>

                <button type="submit">Reveal My Midheaven Sign & Life Purpose</button>
            </form>
        </div>
        
        <button class="back-btn" onclick="window.location.href='tools_index.html'">← Back to All Tools</button>
    </div>
    
    <script>
        // Version: 20260112083146 - Auto-generated cache buster
        const ZODIAC_SIGNS = ['Aries', 'Taurus', 'Gemini', 'Cancer', 'Leo', 'Virgo', 
                             'Libra', 'Scorpio', 'Sagittarius', 'Capricorn', 'Aquarius', 'Pisces'];

        function getZodiacSign(eclipticLongitude) {
            const signIndex = Math.floor(eclipticLongitude / 30);
            const degrees = Math.floor(eclipticLongitude % 30);
            const minutes = Math.floor((eclipticLongitude % 1) * 60);
            return {
                sign: ZODIAC_SIGNS[signIndex],
                degrees: degrees,
                minutes: minutes
            };
        }

        async function geocodeLocation(locationString) {
            const url = `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(locationString)}`;
            const response = await fetch(url);
            const data = await response.json();
            
            if (data && data.length > 0) {
                return {
                    lat: parseFloat(data[0].lat),
                    lon: parseFloat(data[0].lon)
                };
            }
            throw new Error('Location not found');
        }

        document.getElementById('midheavenForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const preferredName = document.getElementById('preferredName').value;
            const birthDate = document.getElementById('birthDate').value;
            const birthTime = document.getElementById('birthTime').value;
            const birthPlace = document.getElementById('birthPlace').value;
            
            try {
                // Geocode location
                const coords = await geocodeLocation(birthPlace);
                
                // Parse date and time
                const [year, month, day] = birthDate.split('-').map(Number);
                const [hours, minutes] = birthTime.split(':').map(Number);
                
                // Better timezone estimation using known timezone data
                let tzOffsetHours = coords.lon / 15;
                
                // Known timezone corrections
                if (coords.lon >= 51 && coords.lon <= 60 && coords.lat >= 22 && coords.lat <= 27) {
                    tzOffsetHours = 4; // UAE/Gulf
                }
                if (coords.lon >= 68 && coords.lon <= 97 && coords.lat >= 8 && coords.lat <= 37) {
                    tzOffsetHours = 5.5; // India
                }
                if (coords.lon >= 73 && coords.lon <= 135 && coords.lat >= 18 && coords.lat <= 54) {
                    if (coords.name && coords.name.toLowerCase().includes('china')) {
                        tzOffsetHours = 8;
                    }
                }
                if (coords.lon >= -10 && coords.lon <= 2 && coords.lat >= 36 && coords.lat <= 60) {
                    tzOffsetHours = 0; // UK/Portugal
                }
                if (coords.lon >= 2 && coords.lon <= 25 && coords.lat >= 35 && coords.lat <= 60) {
                    tzOffsetHours = 1; // Central Europe
                }
                if (coords.lon >= -85 && coords.lon <= -65 && coords.lat >= 24 && coords.lat <= 50) {
                    tzOffsetHours = -5; // US Eastern
                }
                if (coords.lon >= -105 && coords.lon <= -85 && coords.lat >= 24 && coords.lat <= 50) {
                    tzOffsetHours = -6; // US Central
                }
                if (coords.lon >= -115 && coords.lon <= -105 && coords.lat >= 24 && coords.lat <= 50) {
                    tzOffsetHours = -7; // US Mountain
                }
                if (coords.lon >= -125 && coords.lon <= -115 && coords.lat >= 24 && coords.lat <= 50) {
                    tzOffsetHours = -8; // US Pacific
                }
                // Australia
                if (coords.lon >= 113 && coords.lon <= 129 && coords.lat >= -45 && coords.lat <= -10) tzOffsetHours = 8; // WA
                if (coords.lon >= 129 && coords.lon <= 141 && coords.lat >= -45 && coords.lat <= -10) tzOffsetHours = 9.5; // Central
                if (coords.lon >= 141 && coords.lon <= 154 && coords.lat >= -45 && coords.lat <= -10) tzOffsetHours = 10; // Eastern
                
                // Convert to UTC
                const totalLocalMinutes = hours * 60 + minutes;
                const tzOffsetMinutes = tzOffsetHours * 60;
                let totalUtcMinutes = totalLocalMinutes - tzOffsetMinutes;
                
                let utcDay = day;
                let utcMonth = month;
                let utcYear = year;
                
                if (totalUtcMinutes < 0) {
                    totalUtcMinutes += 1440;
                    utcDay--;
                    if (utcDay < 1) {
                        utcMonth--;
                        if (utcMonth < 1) { utcMonth = 12; utcYear--; }
                        utcDay = new Date(utcYear, utcMonth, 0).getDate();
                    }
                } else if (totalUtcMinutes >= 1440) {
                    totalUtcMinutes -= 1440;
                    utcDay++;
                    const daysInMonth = new Date(utcYear, utcMonth, 0).getDate();
                    if (utcDay > daysInMonth) {
                        utcDay = 1;
                        utcMonth++;
                        if (utcMonth > 12) { utcMonth = 1; utcYear++; }
                    }
                }
                
                const utcHours = Math.floor(totalUtcMinutes / 60);
                const utcMins = totalUtcMinutes % 60;
                
                // Use Date object (months are 0-indexed in JavaScript Date)
                const time = Astronomy.MakeTime(new Date(utcYear, utcMonth - 1, utcDay, utcHours, utcMins, 0));
                
                // Calculate houses (simplified - MC is approximately 90 degrees from Ascendant)
                const observer = new Astronomy.Observer(coords.lat, coords.lon, 0);
                const hourAngle = Astronomy.HourAngle('Sun', time, observer);
                
                // Calculate MC (Midheaven) - the cusp of the 10th house
                // MC is the ecliptic longitude at the upper meridian
                const lst = hourAngle.ra + Astronomy.SiderealTime(time);
                const obliquity = 23.439292; // Mean obliquity of ecliptic
                
                // Convert LST to ecliptic longitude for MC
                const lstRad = lst * 15 * Math.PI / 180;
                const obliqRad = obliquity * Math.PI / 180;
                const mcRad = Math.atan2(Math.sin(lstRad), Math.cos(lstRad) * Math.cos(obliqRad));
                let mcLon = mcRad * 180 / Math.PI;
                
                if (mcLon < 0) mcLon += 360;
                
                const mcSign = getZodiacSign(mcLon);
                
                // Store reading data
                const readingData = {
                    toolType: 'midheaven',
                    headerTitle: 'Your Midheaven Sign Reading',
                    headerSubtitle: 'Your life purpose and public calling revealed',
                    sign: mcSign.sign,
                    degrees: mcSign.degrees,
                    minutes: mcSign.minutes,
                    name: preferredName,
                    sourceUrl: 'midheaven-reading.html'
                };
                
                // Try sessionStorage first, fallback to URL params for private browsing
                try {
                    sessionStorage.setItem('quantumMerlinReading', JSON.stringify(readingData));
                    window.location.href = 'reading-loading.html';
                } catch (e) {
                    // Private browsing mode - pass data via URL
                    const encodedData = encodeURIComponent(JSON.stringify(readingData));
                    window.location.href = 'reading-loading.html?data=' + encodedData;
                }
                
            } catch (error) {
                alert('Error calculating Midheaven: ' + error.message + '\\n\\nPlease check your birth information and try again. Birth time must be accurate!');
            }
        });
    </script>

    <!-- Legal Footer -->
    <footer class="legal-footer">
        <div class="legal-links">
            <a href="terms.html">Terms of Service</a>
            <span class="separator">|</span>
            <a href="privacy.html">Privacy Policy</a>
            <span class="separator">|</span>
            <a href="disclaimer.html">Disclaimer</a>
        </div>
        <p class="copyright">&copy; 2026 Quantum Merlin. For entertainment purposes only.</p>
    </footer>
    <style>
        .legal-footer {
            margin-top: 50px;
            padding: 30px 20px;
            text-align: center;
            border-top: 1px solid rgba(191, 90, 242, 0.2);
            background: rgba(10, 10, 15, 0.8);
        }
        .legal-links {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }
        .legal-links a {
            color: #9A8F7A;
            text-decoration: none;
            font-family: 'Cinzel', serif;
            font-size: 0.9rem;
            transition: color 0.3s;
        }
        .legal-links a:hover {
            color: #fbbf24;
        }
        .legal-links .separator {
            color: rgba(191, 90, 242, 0.4);
        }
        .copyright {
            color: #6B6B6B;
            font-size: 0.85rem;
            font-style: italic;
        }
    </style>

</body>
</html>
